<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <fragment th:replace="fragments/header :: header"></fragment>
    <title>Dyfi Wildlife Centre</title>
    <style>
        #map {
            height:calc(99vh - 56px);
            width: 100%;
        }

    </style>
</head>
<body>

<fragment th:replace="fragments/primary_navbar :: primaryNavbar"></fragment>

<div class="col s12 m6" id="map">
</div>

<div id="modal1" class="modal">
    <div class="modal-content">
        <!-- TODO: Place an image here (ref: issue #51) -->
        <!-- TODO: Use JavaScript innerHTML instead of static text -->
        <!-- TODO: Make this a Thymeleaf fragment -->
        <h4>The Dyfi Widlife Centre - A Community Project</h4>
        <p>
            2018 is our 10th year of running the Dyfi Osprey Project at Cors Dyfi Reserve. In that time, starting from humble beginnings, we have seen the Dyfi Osprey Project grow from a bit of a curiosity to one of the leading osprey conservation, engagement and research projects in the world. The conservation work we have done over the last decade has also significantly improved the reserveâ€™s habitat and Cors Dyfi is now one of the best-recorded and monitored nature reserves in Wales.
        </p>
    </div>

</div>

<script th:inline="javascript">
    function initMap() {
        const dyfiWildlifeCentre = {lat: 52.568774, lng: -3.918031};
        const map = new google.maps.Map(document.getElementById('map'), {
            zoom: 16,
            center: dyfiWildlifeCentre,
            mapTypeId: 'hybrid',
            disableDefaultUI: true
        });

        const marker = new google.maps.Marker({
            position: dyfiWildlifeCentre,
            map: map,
            title: 'Dyfi Wildlife Centre'
        });
        marker.addListener('click', function() {
            const element = document.getElementById('modal1');
            const instance = M.Modal.init(element, {dismissible: true});
            instance.open();
        });

        const springGeneratedMarker = new google.maps.Marker({
            position: {lat: [[${marker_test_lat}]], lng: [[${marker_test_long}]]},
            map: map,
            title: '[[${marker_test_name}]]'
        });


    }
</script>

<script async defer
        src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBORcn8smmSs49a79sVJoW5Zpk-p4HxfQg&callback=initMap"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

</body>

</html>